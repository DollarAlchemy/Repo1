:root {
  --bg: #0f1222;
  --panel: #151933;
  --ink: #e6ecff;
  --muted: #93a2ff;
  --accent: #7a8cff;
  --good: #19c37d;
}
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; background: radial-gradient(1200px 600px at 20% 20%, #161a36, var(--bg));
  color: var(--ink); font: 16px/1.3 system-ui, -apple-system, Segoe UI, Roboto, "Noto Emoji", emoji;
}
.topbar {
  display: flex; justify-content: space-between; align-items: center;
  padding: .75rem 1rem; background: #0b0e1f; border-bottom: 1px solid #20264d;
}
.topbar h1 { margin: 0; font-size: 1.1rem; letter-spacing: .5px; }
.controls button { margin-left: .5rem; }
button {
  background: #22284f; color: var(--ink); border: 1px solid #2a3163; border-radius: 10px;
  padding: .5rem .75rem; cursor: pointer; box-shadow: 0 1px 0 rgba(0,0,0,.3);
}
button:hover { filter: brightness(1.05); }

.layout { display: grid; grid-template-columns: 1fr 320px; height: calc(100vh - 110px); }
.playfield {
  position: relative; overflow: hidden; border-right: 1px solid #20264d;
}
.panel { background: var(--panel); overflow: auto; }
.panel-header { position: sticky; top: 0; background: #0f1436; padding: .75rem 1rem; border-bottom: 1px solid #20264d; font-weight: 700; }
.footer { padding: .5rem 1rem; color: var(--muted); border-top: 1px solid #20264d; background: #0b0e1f; }

/* Collapsed panel */
.layout.collapsed { grid-template-columns: 1fr 0; }
.layout.collapsed .panel { width: 0; padding: 0; border: none; }

/* HUD */
.hud { position: absolute; left: 10px; top: 10px; background: rgba(10,12,24,.55); padding: .5rem .6rem; border: 1px solid #27306e; border-radius: 10px; backdrop-filter: blur(4px); }
.hud .row { display: flex; gap: .35rem; font-size: .9rem; color: var(--muted); }
.xpbar { margin-top: .35rem; width: 200px; height: 8px; background: #20264d; border-radius: 999px; overflow: hidden; border: 1px solid #2a3163; }
#xpfill { height: 100%; width: 0%; background: linear-gradient(90deg, #6aa5ff, var(--good)); }

/* Actors */
.actor { position: absolute; transform: translate(-50%, -50%); user-select: none; pointer-events: none; font-size: 28px; }
.actor.projectile { font-size: 22px; }
.actor.pickup { font-size: 24px; }

/* Skill tree */
.tree { padding: 1rem; display: grid; grid-template-columns: repeat(2, 1fr); gap: .75rem; }
.node { background: #1a2050; border: 1px solid #2a3477; border-radius: 12px; padding: .6rem; }
.node h4 { margin: 0 0 .25rem 0; font-size: .95rem; }
.node .desc { color: var(--muted); font-size: .85rem; }
.node .actions { margin-top: .5rem; display: flex; gap: .4rem; align-items: center; }
.node button { padding: .25rem .45rem; border-radius: 8px; }
.badge { background: #222a64; border: 1px solid #2a3477; padding: .15rem .4rem; border-radius: 999px; font-size: .75rem; color: var(--muted); }
.branch { grid-column: 1 / -1; margin-top: .5rem; padding: .4rem .6rem; color: #a9b6ff; border-left: 3px solid #2a3477; font-weight: 700; }

